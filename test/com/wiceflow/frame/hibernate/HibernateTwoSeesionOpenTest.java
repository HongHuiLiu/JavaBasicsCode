package com.wiceflow.frame.hibernate;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.junit.Test;

/**
 * Created by BF on 2017/12/22.
 * 测试循环批量存储是否会导致
 * two open session 异常
 */
public class HibernateTwoSeesionOpenTest {
    private static Configuration configuration = new Configuration().configure("hibernate/hibernateLearn.cfg.xml");
    private static SessionFactory sessionFactory = configuration.buildSessionFactory();

    @Test
    public void forCycleTest(){
        Session session = sessionFactory.getCurrentSession();
        session.beginTransaction();
        for (int i = 1;i<=16;i++){
            Teacher t = new Teacher();
            t.setAge(i);
            t.setName("BF" + i);
            t.setGender("教啥？" + i);
            session.save(t);
        }
        session.getTransaction().commit();
    }
}
